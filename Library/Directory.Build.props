<Project>
    <PropertyGroup>
        <SolutionDir Condition="'$(SolutionDir)' == ''">$(MSBuildThisFileDirectory)/..</SolutionDir>
    </PropertyGroup>

    <Import Project="..\Directory.Build.props" />

    <PropertyGroup>
        <GeneratePackageOnBuild>True</GeneratePackageOnBuild>
        <PackageOutputPath>$(SolutionDir)/DevOps/Distributables/$(Configuration)</PackageOutputPath>
    </PropertyGroup>

    <Target Name="CopyToCommonBin" AfterTargets="Build" >
        <MakeDir Directories="$(CommonBinPath)" />
        <Copy SourceFiles="@(LinkerOutput)" DestinationFolder="$(CommonBinPath)\%(LinkerOutput.RecursiveDir)" SkipUnchangedFiles="true" OverwriteReadOnlyFiles="true" />
        <Message Text="Copied binaries to $(CommonBinPath)" Importance="high" />
    </Target>

    <ItemGroup>
        <LinkerOutput Include="$(OutputPath)**\*.*" />
    </ItemGroup>

</Project>